{"ast":null,"code":"var _jsxFileName = \"/home/meriam/testwapp/WApplication/Partie Client/src/views/ProfilUpdate/ProfilUpdateView/Profile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport moment from 'moment';\nimport axios from 'axios';\nimport { Avatar, Box, Button, Card, CardActions, CardContent, Divider, Typography, makeStyles } from '@material-ui/core';\nimport { setuser } from \"../../../redux/action\";\nimport { useDispatch } from \"react-redux\";\nimport { useSelector } from 'react-redux';\nconst useStyles = makeStyles(() => ({\n  root: {},\n  avatar: {\n    height: 100,\n    width: 100\n  }\n}));\n\nconst Profile = ({\n  className,\n  ...rest\n}) => {\n  _s();\n\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const user = useSelector(state => state.user);\n  const [formData, setFormData] = useState('');\n  const [info, setInfo] = useState({\n    image: '',\n    name: ''\n  });\n  const [progressPercent, setProgressPercent] = useState(0);\n  const [error, setError] = useState({\n    found: false,\n    message: ''\n  });\n  /** end states */\n  // Upload image\n\n  const upload = ({\n    target: {\n      files\n    }\n  }) => {\n    let data = new FormData();\n    data.append('data', files[0]);\n    data.append('name', files[0].name);\n    setFormData(data);\n  }; // Submit Form\n\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const token = localStorage.getItem('token');\n    const options = {\n      headers: {\n        \"x-auth-token\": token,\n        'Content-Type': 'multipart'\n      }\n    };\n    const res = await axios.post(`http://localhost:3003/users/photo`, formData, options);\n    const dis = await axios.get('http://localhost:3003/users', {\n      headers: {\n        \"x-auth-token\": token\n      }\n    });\n    dispatch(setuser(dis.data[0]));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Card, Object.assign({\n    className: clsx(classes.root, className)\n  }, rest, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 10\n    }\n  }, error.found && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    role: \"alert\",\n    style: {\n      width: '150px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, error.message), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"mt-3\",\n    src: `http://localhost:3003/${info.image}`,\n    alt: `${info.name}`,\n    style: {\n      width: '150px',\n      borderRadius: '60%',\n      display: 'block',\n      marginLeft: 'auto',\n      marginRight: ' auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 10\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"inputGroupFile04\",\n    \"aria-describedby\": \"inputGroupFileAddon04\",\n    onChange: upload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary w-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }, \"Submit\"))), /*#__PURE__*/React.createElement(Box, {\n    alignItems: \"center\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    color: \"textPrimary\",\n    gutterBottom: true,\n    variant: \"h3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, user.name), /*#__PURE__*/React.createElement(Typography, {\n    className: classes.dateText,\n    color: \"textSecondary\",\n    variant: \"body1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 11\n    }\n  }, user.lastName))), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }\n  }, \"try more details\")));\n};\n\n_s(Profile, \"9feCiEH7SO3jj77Fjn+VyXiGkt4=\", false, function () {\n  return [useDispatch, useStyles, useSelector];\n});\n\n_c = Profile;\nProfile.propTypes = {\n  className: PropTypes.string\n};\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["/home/meriam/testwapp/WApplication/Partie Client/src/views/ProfilUpdate/ProfilUpdateView/Profile.js"],"names":["React","useState","PropTypes","clsx","moment","axios","Avatar","Box","Button","Card","CardActions","CardContent","Divider","Typography","makeStyles","setuser","useDispatch","useSelector","useStyles","root","avatar","height","width","Profile","className","rest","dispatch","classes","user","state","formData","setFormData","info","setInfo","image","name","progressPercent","setProgressPercent","error","setError","found","message","upload","target","files","data","FormData","append","handleSubmit","e","preventDefault","token","localStorage","getItem","options","headers","res","post","dis","get","position","borderRadius","display","marginLeft","marginRight","dateText","lastName","propTypes","string"],"mappings":"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","sourcesContent":["import React , {useState} from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport moment from 'moment';\nimport axios from 'axios'\nimport {\n  Avatar,\n  Box,\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  Divider,\n  Typography,\n  makeStyles\n} from '@material-ui/core';\nimport { setuser } from \"../../../redux/action\";\nimport { useDispatch } from \"react-redux\";\nimport  {useSelector} from 'react-redux';\n\n\n\nconst useStyles = makeStyles(() => ({\n  root: {},\n  avatar: {\n    height: 100,\n    width: 100\n  }\n}));\n\nconst Profile = ({ className, ...rest }) => {\n  const dispatch = useDispatch();\n  const classes = useStyles();\n\n  const user=useSelector((state =>state.user));\n   const [formData, setFormData] = useState('');\n  \n  const [info, setInfo] = useState({\n    image: '',\n    name: '',\n  });\n  const [progressPercent, setProgressPercent] = useState(0);\n  const [error, setError] = useState({\n    found: false,\n    message: '',\n  });\n  /** end states */\n\n  // Upload image\n  const upload = ({ target: { files } }) => {\n    let data = new FormData();\n    data.append('data', files[0]);\n    data.append('name', files[0].name);\n    setFormData(data);\n  };\n\n  // Submit Form\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n   const token = localStorage.getItem('token');\n    const options = {\n     \n headers: {\"x-auth-token\": token ,'Content-Type': 'multipart'},\n    \n    };\n    \n       const res = await axios.post(`http://localhost:3003/users/photo`,formData,options);\n       const dis = await axios.get('http://localhost:3003/users', {\n        headers: {\"x-auth-token\": token}\n    }\n    )\n    dispatch(setuser(dis.data[0]));\n      }\n\n  return (\n    <div>\n    <Card\n      className={clsx(classes.root, className)}\n      {...rest}\n    >\n      <CardContent>\n       \n         <div\n      \n    >\n      {error.found && (\n        <div\n          className='alert alert-danger'\n          role='alert'\n          style={{ width: '150px'}}\n        >\n          {error.message}\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit} >\n       \n        <div  style={{position:'center'}}>\n         <img\n        className='mt-3'\n        src={`http://localhost:3003/${info.image}`}\n        alt={`${info.name}`}\n        style={{ width: '150px',borderRadius:'60%' ,display: 'block',marginLeft: 'auto',marginRight:' auto'}}\n      />\n          <input\n            type='file'\n            \n            id='inputGroupFile04'\n            aria-describedby='inputGroupFileAddon04'\n            onChange={upload}\n          />\n          \n        </div>\n        <button type='submit' className='btn btn-primary w-100'>\n          Submit\n        </button>\n      </form>\n     \n    </div>\n        <Box\n          alignItems=\"center\"\n          display=\"flex\"\n          flexDirection=\"column\"\n        >\n          \n          <Typography\n            color=\"textPrimary\"\n            gutterBottom\n            variant=\"h3\"\n          >\n            {user.name}\n          </Typography>\n        \n          <Typography\n            className={classes.dateText}\n            color=\"textSecondary\"\n            variant=\"body1\"\n          >\n            {user.lastName}\n          </Typography>\n        </Box>\n      </CardContent>\n     \n      <Divider />\n      <Button>try more details</Button>\n    </Card>\n    \n    </div>\n  );\n};\n\nProfile.propTypes = {\n  className: PropTypes.string\n};\n\nexport default Profile;\n\n\n\n"]},"metadata":{},"sourceType":"module"}