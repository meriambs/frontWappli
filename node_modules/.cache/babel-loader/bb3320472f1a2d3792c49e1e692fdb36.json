{"ast":null,"code":"import _regeneratorRuntime from\"/home/meriam/testwapp/WApplication/Partie Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/meriam/testwapp/WApplication/Partie Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from'react';import{Link as RouterLink,useNavigate}from'react-router-dom';import*as Yup from'yup';import{Formik}from'formik';import{Box,Button,Container,Grid,Link,TextField,Typography,makeStyles}from'@material-ui/core';import FacebookIcon from'src/icons/Facebook';import GoogleIcon from'src/icons/Google';import Page from'src/components/Page';import axios from'axios';var useStyles=makeStyles(function(theme){return{root:{backgroundColor:theme.palette.background.dark,height:'100%',paddingBottom:theme.spacing(3),paddingTop:theme.spacing(3)}};});var LoginView=function LoginView(){var classes=useStyles();var navigate=useNavigate();return/*#__PURE__*/React.createElement(Page,{className:classes.root,title:\"Login\"},/*#__PURE__*/React.createElement(Box,{display:\"flex\",flexDirection:\"column\",height:\"100%\",justifyContent:\"center\"},/*#__PURE__*/React.createElement(Container,{maxWidth:\"sm\"},/*#__PURE__*/React.createElement(Formik,{initialValues:{email:'',password:''},validationSchema:Yup.object().shape({email:Yup.string().email('Must be a valid email').max(255).required('Email is required'),password:Yup.string().max(255).required('Password is required')}),onSubmit:/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"\".concat(process.env.REACT_APP_URL,\"auth\"),values);case 2:res=_context.sent;_context.next=5;return localStorage.setItem('token',res.data.token);case 5:setTimeout(function(){navigate('/app/Acceuil',{replace:true});},500);case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()},function(_ref2){var errors=_ref2.errors,handleBlur=_ref2.handleBlur,handleChange=_ref2.handleChange,handleSubmit=_ref2.handleSubmit,isSubmitting=_ref2.isSubmitting,touched=_ref2.touched,values=_ref2.values;return/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Box,{mb:3},/*#__PURE__*/React.createElement(Typography,{color:\"textPrimary\",variant:\"h2\"},\"Sign in\"),/*#__PURE__*/React.createElement(Typography,{color:\"textSecondary\",gutterBottom:true,variant:\"body2\"},\"Sign in on the internal platform\")),/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,md:6},/*#__PURE__*/React.createElement(Button,{color:\"primary\",fullWidth:true,startIcon:/*#__PURE__*/React.createElement(FacebookIcon,null),onClick:handleSubmit,size:\"large\",variant:\"contained\"},\"Login with Facebook\")),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,md:6},/*#__PURE__*/React.createElement(Button,{fullWidth:true,startIcon:/*#__PURE__*/React.createElement(GoogleIcon,null),onClick:handleSubmit,size:\"large\",variant:\"contained\"},\"Login with Google\"))),/*#__PURE__*/React.createElement(Box,{mt:3,mb:1},/*#__PURE__*/React.createElement(Typography,{align:\"center\",color:\"textSecondary\",variant:\"body1\"},\"or login with email address\")),/*#__PURE__*/React.createElement(TextField,{error:Boolean(touched.email&&errors.email),fullWidth:true,helperText:touched.email&&errors.email,label:\"Email Address\",margin:\"normal\",name:\"email\",onBlur:handleBlur,onChange:handleChange,type:\"email\",value:values.email,variant:\"outlined\"}),/*#__PURE__*/React.createElement(TextField,{error:Boolean(touched.password&&errors.password),fullWidth:true,helperText:touched.password&&errors.password,label:\"Password\",margin:\"normal\",name:\"password\",onBlur:handleBlur,onChange:handleChange,type:\"password\",value:values.password,variant:\"outlined\"}),/*#__PURE__*/React.createElement(Box,{my:2},/*#__PURE__*/React.createElement(Button,{color:\"primary\",disabled:isSubmitting,fullWidth:true,size:\"large\",type:\"submit\",variant:\"contained\"},\"Sign in now\")),/*#__PURE__*/React.createElement(Typography,{color:\"textSecondary\",variant:\"body1\"},\"Don't have an account?\",' ',/*#__PURE__*/React.createElement(Link,{component:RouterLink,to:\"/register\",variant:\"h6\"},\"Sign up\")));}))));};export default LoginView;","map":{"version":3,"sources":["/home/meriam/testwapp/WApplication/Partie Client/src/views/auth/LoginView.js"],"names":["React","Link","RouterLink","useNavigate","Yup","Formik","Box","Button","Container","Grid","TextField","Typography","makeStyles","FacebookIcon","GoogleIcon","Page","axios","useStyles","theme","root","backgroundColor","palette","background","dark","height","paddingBottom","spacing","paddingTop","LoginView","classes","navigate","email","password","object","shape","string","max","required","values","post","process","env","REACT_APP_URL","res","localStorage","setItem","data","token","setTimeout","replace","errors","handleBlur","handleChange","handleSubmit","isSubmitting","touched","Boolean"],"mappings":"2UAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAI,GAAIC,CAAAA,UAAjB,CAA6BC,WAA7B,KAAgD,kBAAhD,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,KAArB,CACA,OAASC,MAAT,KAAuB,QAAvB,CACA,OACEC,GADF,CAEEC,MAFF,CAGEC,SAHF,CAIEC,IAJF,CAKER,IALF,CAMES,SANF,CAOEC,UAPF,CAQEC,UARF,KASO,mBATP,CAUA,MAAOC,CAAAA,YAAP,KAAyB,oBAAzB,CACA,MAAOC,CAAAA,UAAP,KAAuB,kBAAvB,CACA,MAAOC,CAAAA,IAAP,KAAiB,qBAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,SAAS,CAAGL,UAAU,CAAC,SAACM,KAAD,QAAY,CACvCC,IAAI,CAAE,CACJC,eAAe,CAAEF,KAAK,CAACG,OAAN,CAAcC,UAAd,CAAyBC,IADtC,CAEJC,MAAM,CAAE,MAFJ,CAGJC,aAAa,CAAEP,KAAK,CAACQ,OAAN,CAAc,CAAd,CAHX,CAIJC,UAAU,CAAET,KAAK,CAACQ,OAAN,CAAc,CAAd,CAJR,CADiC,CAAZ,EAAD,CAA5B,CASA,GAAME,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtB,GAAMC,CAAAA,OAAO,CAAGZ,SAAS,EAAzB,CACA,GAAMa,CAAAA,QAAQ,CAAG3B,WAAW,EAA5B,CAEA,mBACE,oBAAC,IAAD,EACE,SAAS,CAAE0B,OAAO,CAACV,IADrB,CAEE,KAAK,CAAC,OAFR,eAIE,oBAAC,GAAD,EACE,OAAO,CAAC,MADV,CAEE,aAAa,CAAC,QAFhB,CAGE,MAAM,CAAC,MAHT,CAIE,cAAc,CAAC,QAJjB,eAME,oBAAC,SAAD,EAAW,QAAQ,CAAC,IAApB,eACE,oBAAC,MAAD,EACE,aAAa,CAAE,CACbY,KAAK,CAAE,EADM,CAEbC,QAAQ,CAAE,EAFG,CADjB,CAKE,gBAAgB,CAAE5B,GAAG,CAAC6B,MAAJ,GAAaC,KAAb,CAAmB,CACnCH,KAAK,CAAE3B,GAAG,CAAC+B,MAAJ,GAAaJ,KAAb,CAAmB,uBAAnB,EAA4CK,GAA5C,CAAgD,GAAhD,EAAqDC,QAArD,CAA8D,mBAA9D,CAD4B,CAE/BL,QAAQ,CAAE5B,GAAG,CAAC+B,MAAJ,GAAaC,GAAb,CAAiB,GAAjB,EAAsBC,QAAtB,CAA+B,sBAA/B,CAFqB,CAAnB,CALpB,CASE,QAAQ,0FAAE,iBAAOC,MAAP,gJACUtB,CAAAA,KAAK,CAACuB,IAAN,WAAcC,OAAO,CAACC,GAAR,CAAYC,aAA1B,SAA+CJ,MAA/C,CADV,QACFK,GADE,qCAEFC,CAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BF,GAAG,CAACG,IAAJ,CAASC,KAAvC,CAFE,QAGRC,UAAU,CAAC,UAAI,CACblB,QAAQ,CAAC,cAAD,CAAiB,CAAEmB,OAAO,CAAE,IAAX,CAAjB,CAAR,CACD,CAFS,CAEP,GAFO,CAAV,CAHQ,sDAAF,8DATV,EAiBG,mBACCC,CAAAA,MADD,OACCA,MADD,CAECC,UAFD,OAECA,UAFD,CAGCC,YAHD,OAGCA,YAHD,CAICC,YAJD,OAICA,YAJD,CAKCC,YALD,OAKCA,YALD,CAMCC,OAND,OAMCA,OAND,CAOCjB,MAPD,OAOCA,MAPD,oBASC,4BAAM,QAAQ,CAAEe,YAAhB,eACE,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,eACE,oBAAC,UAAD,EACE,KAAK,CAAC,aADR,CAEE,OAAO,CAAC,IAFV,YADF,cAOE,oBAAC,UAAD,EACE,KAAK,CAAC,eADR,CAEE,YAAY,KAFd,CAGE,OAAO,CAAC,OAHV,qCAPF,CADF,cAgBE,oBAAC,IAAD,EACE,SAAS,KADX,CAEE,OAAO,CAAE,CAFX,eAIE,oBAAC,IAAD,EACE,IAAI,KADN,CAEE,EAAE,CAAE,EAFN,CAGE,EAAE,CAAE,CAHN,eAKE,oBAAC,MAAD,EACE,KAAK,CAAC,SADR,CAEE,SAAS,KAFX,CAGE,SAAS,cAAE,oBAAC,YAAD,MAHb,CAIE,OAAO,CAAEA,YAJX,CAKE,IAAI,CAAC,OALP,CAME,OAAO,CAAC,WANV,wBALF,CAJF,cAoBE,oBAAC,IAAD,EACE,IAAI,KADN,CAEE,EAAE,CAAE,EAFN,CAGE,EAAE,CAAE,CAHN,eAKE,oBAAC,MAAD,EACE,SAAS,KADX,CAEE,SAAS,cAAE,oBAAC,UAAD,MAFb,CAGE,OAAO,CAAEA,YAHX,CAIE,IAAI,CAAC,OAJP,CAKE,OAAO,CAAC,WALV,sBALF,CApBF,CAhBF,cAoDE,oBAAC,GAAD,EACE,EAAE,CAAE,CADN,CAEE,EAAE,CAAE,CAFN,eAIE,oBAAC,UAAD,EACE,KAAK,CAAC,QADR,CAEE,KAAK,CAAC,eAFR,CAGE,OAAO,CAAC,OAHV,gCAJF,CApDF,cAgEE,oBAAC,SAAD,EACE,KAAK,CAAEG,OAAO,CAACD,OAAO,CAACxB,KAAR,EAAiBmB,MAAM,CAACnB,KAAzB,CADhB,CAEE,SAAS,KAFX,CAGE,UAAU,CAAEwB,OAAO,CAACxB,KAAR,EAAiBmB,MAAM,CAACnB,KAHtC,CAIE,KAAK,CAAC,eAJR,CAKE,MAAM,CAAC,QALT,CAME,IAAI,CAAC,OANP,CAOE,MAAM,CAAEoB,UAPV,CAQE,QAAQ,CAAEC,YARZ,CASE,IAAI,CAAC,OATP,CAUE,KAAK,CAAEd,MAAM,CAACP,KAVhB,CAWE,OAAO,CAAC,UAXV,EAhEF,cA6EE,oBAAC,SAAD,EACE,KAAK,CAAEyB,OAAO,CAACD,OAAO,CAACvB,QAAR,EAAoBkB,MAAM,CAAClB,QAA5B,CADhB,CAEE,SAAS,KAFX,CAGE,UAAU,CAAEuB,OAAO,CAACvB,QAAR,EAAoBkB,MAAM,CAAClB,QAHzC,CAIE,KAAK,CAAC,UAJR,CAKE,MAAM,CAAC,QALT,CAME,IAAI,CAAC,UANP,CAOE,MAAM,CAAEmB,UAPV,CAQE,QAAQ,CAAEC,YARZ,CASE,IAAI,CAAC,UATP,CAUE,KAAK,CAAEd,MAAM,CAACN,QAVhB,CAWE,OAAO,CAAC,UAXV,EA7EF,cA0FE,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,eACE,oBAAC,MAAD,EACE,KAAK,CAAC,SADR,CAEE,QAAQ,CAAEsB,YAFZ,CAGE,SAAS,KAHX,CAIE,IAAI,CAAC,OAJP,CAKE,IAAI,CAAC,QALP,CAME,OAAO,CAAC,WANV,gBADF,CA1FF,cAsGE,oBAAC,UAAD,EACE,KAAK,CAAC,eADR,CAEE,OAAO,CAAC,OAFV,2BAKG,GALH,cAME,oBAAC,IAAD,EACE,SAAS,CAAEpD,UADb,CAEE,EAAE,CAAC,WAFL,CAGE,OAAO,CAAC,IAHV,YANF,CAtGF,CATD,EAjBH,CADF,CANF,CAJF,CADF,CAiKD,CArKD,CAuKA,cAAe0B,CAAAA,SAAf","sourcesContent":["import React from 'react';\nimport { Link as RouterLink, useNavigate } from 'react-router-dom';\nimport * as Yup from 'yup';\nimport { Formik } from 'formik';\nimport {\n  Box,\n  Button,\n  Container,\n  Grid,\n  Link,\n  TextField,\n  Typography,\n  makeStyles\n} from '@material-ui/core';\nimport FacebookIcon from 'src/icons/Facebook';\nimport GoogleIcon from 'src/icons/Google';\nimport Page from 'src/components/Page';\nimport axios from 'axios';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: theme.palette.background.dark,\n    height: '100%',\n    paddingBottom: theme.spacing(3),\n    paddingTop: theme.spacing(3)\n  }\n}));\n\nconst LoginView = () => {\n  const classes = useStyles();\n  const navigate = useNavigate();\n\n  return (\n    <Page\n      className={classes.root}\n      title=\"Login\"\n    >\n      <Box\n        display=\"flex\"\n        flexDirection=\"column\"\n        height=\"100%\"\n        justifyContent=\"center\"\n      >\n        <Container maxWidth=\"sm\">\n          <Formik\n            initialValues={{\n              email: '',\n              password: ''\n            }}\n            validationSchema={Yup.object().shape({\n              email: Yup.string().email('Must be a valid email').max(255).required('Email is required'),\n                  password: Yup.string().max(255).required('Password is required'),\n            })}\n            onSubmit={async (values) => {\n              const res = await axios.post(`${process.env.REACT_APP_URL}auth`, values);\n              await localStorage.setItem('token', res.data.token);\n              setTimeout(()=>{\n                navigate('/app/Acceuil', { replace: true })\n              }, 500)\n            }}\n          >\n            {({\n              errors,\n              handleBlur,\n              handleChange,\n              handleSubmit,\n              isSubmitting,\n              touched,\n              values\n            }) => (\n              <form onSubmit={handleSubmit}>\n                <Box mb={3}>\n                  <Typography\n                    color=\"textPrimary\"\n                    variant=\"h2\"\n                  >\n                    Sign in\n                  </Typography>\n                  <Typography\n                    color=\"textSecondary\"\n                    gutterBottom\n                    variant=\"body2\"\n                  >\n                    Sign in on the internal platform\n                  </Typography>\n                </Box>\n                <Grid\n                  container\n                  spacing={3}\n                >\n                  <Grid\n                    item\n                    xs={12}\n                    md={6}\n                  >\n                    <Button\n                      color=\"primary\"\n                      fullWidth\n                      startIcon={<FacebookIcon />}\n                      onClick={handleSubmit}\n                      size=\"large\"\n                      variant=\"contained\"\n                    >\n                      Login with Facebook\n                    </Button>\n                  </Grid>\n                  <Grid\n                    item\n                    xs={12}\n                    md={6}\n                  >\n                    <Button\n                      fullWidth\n                      startIcon={<GoogleIcon />}\n                      onClick={handleSubmit}\n                      size=\"large\"\n                      variant=\"contained\"\n                    >\n                      Login with Google\n                    </Button>\n                  </Grid>\n                </Grid>\n                <Box\n                  mt={3}\n                  mb={1}\n                >\n                  <Typography\n                    align=\"center\"\n                    color=\"textSecondary\"\n                    variant=\"body1\"\n                  >\n                    or login with email address\n                  </Typography>\n                </Box>\n                <TextField\n                  error={Boolean(touched.email && errors.email)}\n                  fullWidth\n                  helperText={touched.email && errors.email}\n                  label=\"Email Address\"\n                  margin=\"normal\"\n                  name=\"email\"\n                  onBlur={handleBlur}\n                  onChange={handleChange}\n                  type=\"email\"\n                  value={values.email}\n                  variant=\"outlined\"\n                />\n                <TextField\n                  error={Boolean(touched.password && errors.password)}\n                  fullWidth\n                  helperText={touched.password && errors.password}\n                  label=\"Password\"\n                  margin=\"normal\"\n                  name=\"password\"\n                  onBlur={handleBlur}\n                  onChange={handleChange}\n                  type=\"password\"\n                  value={values.password}\n                  variant=\"outlined\"\n                />\n                <Box my={2}>\n                  <Button\n                    color=\"primary\"\n                    disabled={isSubmitting}\n                    fullWidth\n                    size=\"large\"\n                    type=\"submit\"\n                    variant=\"contained\"\n                  >\n                    Sign in now\n                  </Button>\n                </Box>\n                <Typography\n                  color=\"textSecondary\"\n                  variant=\"body1\"\n                >\n                  Don&apos;t have an account?\n                  {' '}\n                  <Link\n                    component={RouterLink}\n                    to=\"/register\"\n                    variant=\"h6\"\n                  >\n                    Sign up\n                  </Link>\n                </Typography>\n              </form>\n            )}\n          </Formik>\n        </Container>\n      </Box>\n    </Page>\n  );\n};\n\nexport default LoginView;\n"]},"metadata":{},"sourceType":"module"}