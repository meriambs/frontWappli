{"ast":null,"code":"import _regeneratorRuntime from\"/home/meriam/testwapp/WApplication/Partie Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/meriam/testwapp/WApplication/Partie Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/meriam/testwapp/WApplication/Partie Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/home/meriam/testwapp/WApplication/Partie Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{useState}from'react';import clsx from'clsx';import moment from'moment';import axios from'axios';import{Avatar,Box,Button,Card,CardActions,CardContent,Divider,Typography,makeStyles}from'@material-ui/core';import{setuser}from\"../../../redux/action\";import{useDispatch}from\"react-redux\";import{useSelector}from'react-redux';import{Link as RouterLink,useNavigate}from'react-router-dom';var useStyles=makeStyles(function(){return{root:{},avatar:{height:100,width:100}};});var Profile=function Profile(_ref){var className=_ref.className,rest=_objectWithoutProperties(_ref,[\"className\"]);var dispatch=useDispatch();var classes=useStyles();var navigate=useNavigate();var user=useSelector(function(state){return state.user;});var _useState=useState(''),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState({image:'',name:''}),_useState4=_slicedToArray(_useState3,2),info=_useState4[0],setInfo=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),progressPercent=_useState6[0],setProgressPercent=_useState6[1];var _useState7=useState({found:false,message:''}),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];/** end states */ // Upload image\nvar upload=function upload(_ref2){var files=_ref2.target.files;var data=new FormData();data.append('data',files[0]);data.append('name',files[0].name);setFormData(data);};//click redirect :\nvar click=function click(e){navigate('/app/account',{replace:true});};// Submit Form\nvar handleSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var token,options,res,dis;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();token=localStorage.getItem('token');options={headers:{\"x-auth-token\":token,'Content-Type':'multipart'}};_context.next=5;return axios.post(\"http://localhost:3003/users/photo\",formData,options);case 5:res=_context.sent;_context.next=8;return axios.get('http://localhost:3003/users',{headers:{\"x-auth-token\":token}});case 8:dis=_context.sent;dispatch(setuser(dis.data[0]));case 10:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Card,Object.assign({className:clsx(classes.root,className)},rest),/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Box,{alignItems:\"center\",display:\"flex\",flexDirection:\"column\"},/*#__PURE__*/React.createElement(Typography,{color:\"textPrimary\",gutterBottom:true,variant:\"h3\"},user.name),/*#__PURE__*/React.createElement(Typography,{className:classes.dateText,color:\"textSecondary\",variant:\"body1\"},user.lastName)),/*#__PURE__*/React.createElement(\"div\",null,error.found&&/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\",role:\"alert\",style:{width:'150px'}},error.message),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{style:{position:'center'}},/*#__PURE__*/React.createElement(\"img\",{className:\"mt-3\",src:\"http://localhost:3003/\".concat(info.image),alt:\"\".concat(info.name),style:{width:'150px',borderRadius:'60%',display:'block',marginLeft:'auto',marginRight:' auto'}}),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",id:\"inputGroupFile04\",\"aria-describedby\":\"inputGroupFileAddon04\",onChange:upload})),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary w-100\"},\"Submit\"))))),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(Button,{onClick:click},\"try more details\")));};export default Profile;","map":{"version":3,"sources":["/home/meriam/testwapp/WApplication/Partie Client/src/views/Profiledetail/ProfiledetailView/Profile.js"],"names":["React","useState","clsx","moment","axios","Avatar","Box","Button","Card","CardActions","CardContent","Divider","Typography","makeStyles","setuser","useDispatch","useSelector","Link","RouterLink","useNavigate","useStyles","root","avatar","height","width","Profile","className","rest","dispatch","classes","navigate","user","state","formData","setFormData","image","name","info","setInfo","progressPercent","setProgressPercent","found","message","error","setError","upload","files","target","data","FormData","append","click","e","replace","handleSubmit","preventDefault","token","localStorage","getItem","options","headers","post","res","get","dis","dateText","lastName","position","borderRadius","display","marginLeft","marginRight"],"mappings":"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","sourcesContent":["import React , {useState} from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport moment from 'moment';\nimport axios from 'axios'\nimport {\n  Avatar,\n  Box,\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  Divider,\n  Typography,\n  makeStyles\n} from '@material-ui/core';\nimport { setuser } from \"../../../redux/action\";\nimport { useDispatch } from \"react-redux\";\nimport  {useSelector} from 'react-redux';\nimport { Link as RouterLink, useNavigate } from 'react-router-dom';\n\n\nconst useStyles = makeStyles(() => ({\n  root: {},\n  avatar: {\n    height: 100,\n    width: 100\n  }\n}));\n\nconst Profile = ({ className, ...rest }) => {\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const navigate = useNavigate();\n\n\n  const user=useSelector((state =>state.user));\n  const [formData, setFormData] = useState('');\n  \n  const [info, setInfo] = useState({\n    image: '',\n    name: '',\n  });\n  const [progressPercent, setProgressPercent] = useState(0);\n  const [error, setError] = useState({\n    found: false,\n    message: '',\n  });\n  /** end states */\n\n  // Upload image\n  const upload = ({ target: { files } }) => {\n    let data = new FormData();\n    data.append('data', files[0]);\n    data.append('name', files[0].name);\n    setFormData(data);\n  };\n//click redirect :\nconst click=(e)=>{\n  navigate('/app/account', { replace: true })\n}\n\n\n\n\n  // Submit Form\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n   const token = localStorage.getItem('token');\n    const options = {\n     \n headers: {\"x-auth-token\": token ,'Content-Type': 'multipart'},\n    \n    };\n    \n       const res = await axios.post(`http://localhost:3003/users/photo`,formData,options);\n       const dis = await axios.get('http://localhost:3003/users', {\n        headers: {\"x-auth-token\": token}\n    }\n    )\n    dispatch(setuser(dis.data[0]));\n      }\n\n  return (\n    <div>\n    <Card\n      className={clsx(classes.root, className)}\n      {...rest}\n    >\n      <CardContent>\n       \n         <div\n      \n    >\n    <Box\n    alignItems=\"center\"\n    display=\"flex\"\n    flexDirection=\"column\"\n  >\n    \n    <Typography\n      color=\"textPrimary\"\n      gutterBottom\n      variant=\"h3\"\n    >\n      {user.name}\n    </Typography>\n  \n    <Typography\n      className={classes.dateText}\n      color=\"textSecondary\"\n      variant=\"body1\"\n    >\n      {user.lastName}\n    </Typography>\n  </Box> \n  \n  <div>\n      {error.found && (\n        <div\n          className='alert alert-danger'\n          role='alert'\n          style={{ width: '150px'}}\n        >\n          {error.message}\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit} >\n       \n        <div  style={{position:'center'}}>\n         <img\n        className='mt-3'\n        src={`http://localhost:3003/${info.image}`}\n        alt={`${info.name}`}\n        style={{ width: '150px',borderRadius:'60%' ,display: 'block',marginLeft: 'auto',marginRight:' auto'}}\n      />\n          <input\n            type='file'\n            \n            id='inputGroupFile04'\n            aria-describedby='inputGroupFileAddon04'\n            onChange={upload}\n          />\n          \n        </div>\n        <button type='submit' className='btn btn-primary w-100'>\n          Submit\n        </button>\n      </form>\n     \n    </div>\n       </div>\n      </CardContent>\n     \n      <Divider />\n      <Button onClick={click}>try more details</Button>\n    </Card>\n    \n    </div>\n  );\n};\n\nProfile.propTypes = {\n  className: PropTypes.string\n};\n\nexport default Profile;\n\n\n\n"]},"metadata":{},"sourceType":"module"}