{"ast":null,"code":"import _slicedToArray from\"/home/meriam/testwapp/WApplication/Partie Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import axios from'axios';function Photo(){/** start states */var _useState=useState(''),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState({image:'',name:''}),_useState4=_slicedToArray(_useState3,2),info=_useState4[0],setInfo=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),progressPercent=_useState6[0],setProgressPercent=_useState6[1];var _useState7=useState({found:false,message:''}),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];/** end states */ // Upload image\nvar upload=function upload(_ref){var files=_ref.target.files;var data=new FormData();data.append('categoryImage',files[0]);data.append('name',files[0].name);setFormData(data);};// Submit Form\nvar handleSubmit=function handleSubmit(e){e.preventDefault();setInfo({image:'',name:''});setProgressPercent(0);var options={onUploadProgress:function onUploadProgress(progressEvent){var loaded=progressEvent.loaded,total=progressEvent.total;var percent=Math.floor(loaded*100/total);console.log(\"\".concat(loaded,\"kb of \").concat(total,\"kb | \").concat(percent,\"%\"));setProgressPercent(percent);}};axios.post('http://localhost:3003/api/category',formData,options).then(function(res){console.log(res.data);setTimeout(function(){setInfo(res.data.category);setProgressPercent(0);},1000);}).catch(function(err){console.log(err.response);setError({found:true,message:err.response.data.errors});setTimeout(function(){setError({found:false,message:''});setProgressPercent(0);},3000);});};return/*#__PURE__*/React.createElement(\"div\",{style:{width:'100vw',height:'100vh'},className:\"d-flex justify-content-center align-items-center flex-column\"},error.found&&/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\",role:\"alert\",style:{width:'359px'}},error.message),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit,style:{width:'359px'}},/*#__PURE__*/React.createElement(\"div\",{className:\"progress mb-3 w-100\"},/*#__PURE__*/React.createElement(\"div\",{className:\"progress-bar\",role:\"progressbar\",style:{width:\"\".concat(progressPercent,\"%\")},\"aria-valuenow\":progressPercent,\"aria-valuemin\":0,\"aria-valuemax\":100},progressPercent)),/*#__PURE__*/React.createElement(\"div\",{className:\"custom-file mb-3\"},/*#__PURE__*/React.createElement(\"input\",{type:\"file\",className:\"custom-file-input\",id:\"inputGroupFile04\",\"aria-describedby\":\"inputGroupFileAddon04\",onChange:upload}),/*#__PURE__*/React.createElement(\"label\",{className:\"custom-file-label\",htmlFor:\"inputGroupFile04\"},\"Choose file\")),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary w-100\"},\"Submit\")),/*#__PURE__*/React.createElement(\"img\",{className:\"mt-3\",src:\"http://localhost:3003/\".concat(info.image),alt:\"\".concat(info.name),style:{width:'359px'}}));}export default Photo;","map":{"version":3,"sources":["/home/meriam/testwapp/WApplication/Partie Client/src/views/PhotoUpdted/PhotoUpdtedView/index.js"],"names":["React","useState","axios","Photo","formData","setFormData","image","name","info","setInfo","progressPercent","setProgressPercent","found","message","error","setError","upload","files","target","data","FormData","append","handleSubmit","e","preventDefault","options","onUploadProgress","progressEvent","loaded","total","percent","Math","floor","console","log","post","then","res","setTimeout","category","catch","err","response","errors","width","height"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nfunction Photo() {\n  /** start states */\n  const [formData, setFormData] = useState('');\n  const [info, setInfo] = useState({\n    image: '',\n    name: '',\n  });\n  const [progressPercent, setProgressPercent] = useState(0);\n  const [error, setError] = useState({\n    found: false,\n    message: '',\n  });\n  /** end states */\n\n  // Upload image\n  const upload = ({ target: { files } }) => {\n    let data = new FormData();\n    data.append('categoryImage', files[0]);\n    data.append('name', files[0].name);\n    setFormData(data);\n  };\n\n  // Submit Form\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setInfo({\n      image: '',\n      name: '',\n    });\n    setProgressPercent(0);\n    const options = {\n      onUploadProgress: (progressEvent) => {\n        const { loaded, total } = progressEvent;\n        let percent = Math.floor((loaded * 100) / total);\n        console.log(`${loaded}kb of ${total}kb | ${percent}%`);\n        setProgressPercent(percent);\n      },\n    };\n    axios\n      .post('http://localhost:3003/api/category', formData, options)\n      .then((res) => {\n        console.log(res.data);\n        setTimeout(() => {\n          setInfo(res.data.category);\n          setProgressPercent(0);\n        }, 1000);\n      })\n      .catch((err) => {\n        console.log(err.response);\n        setError({\n          found: true,\n          message: err.response.data.errors,\n        });\n        setTimeout(() => {\n          setError({\n            found: false,\n            message: '',\n          });\n          setProgressPercent(0);\n        }, 3000);\n      });\n    \n  };\n\n  return (\n    <div\n      style={{ width: '100vw', height: '100vh' }}\n      className='d-flex justify-content-center align-items-center flex-column'\n    >\n      {error.found && (\n        <div\n          className='alert alert-danger'\n          role='alert'\n          style={{ width: '359px' }}\n        >\n          {error.message}\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit} style={{ width: '359px' }}>\n        <div className='progress mb-3 w-100'>\n          <div\n            className='progress-bar'\n            role='progressbar'\n            style={{ width: `${progressPercent}%` }}\n            aria-valuenow={progressPercent}\n            aria-valuemin={0}\n            aria-valuemax={100}\n          >\n            {progressPercent}\n          </div>\n        </div>\n        <div className='custom-file mb-3'>\n          <input\n            type='file'\n            className='custom-file-input'\n            id='inputGroupFile04'\n            aria-describedby='inputGroupFileAddon04'\n            onChange={upload}\n          />\n          <label className='custom-file-label' htmlFor='inputGroupFile04'>\n            Choose file\n          </label>\n        </div>\n        <button type='submit' className='btn btn-primary w-100'>\n          Submit\n        </button>\n      </form>\n      <img\n        className='mt-3'\n        src={`http://localhost:3003/${info.image}`}\n        alt={`${info.name}`}\n        style={{ width: '359px' }}\n      />\n    </div>\n  );\n}\n\nexport default Photo;\n"]},"metadata":{},"sourceType":"module"}