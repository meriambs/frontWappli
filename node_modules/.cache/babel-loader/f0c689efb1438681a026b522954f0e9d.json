{"ast":null,"code":"import _regeneratorRuntime from\"/home/meriam/testwapp/WApplication/Partie Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/meriam/testwapp/WApplication/Partie Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/meriam/testwapp/WApplication/Partie Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/home/meriam/testwapp/WApplication/Partie Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{useState}from'react';import clsx from'clsx';import AttachFileIcon from'@material-ui/icons/AttachFile';import{Box,Button,Card,CardContent,CardHeader,Divider,Grid,Typography,makeStyles}from'@material-ui/core';import{useSelector}from'react-redux';import{DropzoneDialog}from'material-ui-dropzone';import{IconButton}from'@material-ui/core';import{Link as RouterLink,useParams,useNavigate}from'react-router-dom';import axios from'axios';import CameraRollIcon from'@material-ui/icons/CameraRoll';import ReactRecorder from'../../recorder/recordrtc-react/src/RecordPage.react';var useStyles=makeStyles(function(){return{root:{}};});var ProfileDetails=function ProfileDetails(_ref){var className=_ref.className,rest=_objectWithoutProperties(_ref,[\"className\"]);var _useParams=useParams(),id=_useParams.id;var classes=useStyles();var user=useSelector(function(state){return state.user;});var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),video=_useState4[0],setVideo=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),cv=_useState6[0],setCv=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),videoBinary=_useState8[0],setVideoBinary=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isVideoRecorded=_useState10[0],setIsVideoRecorded=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isVideoUploaded=_useState12[0],setIsVideoUploaded=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),recording=_useState14[0],setRecording=_useState14[1];var onRecordingComplete=function onRecordingComplete(blob){setVideoBinary(blob);setIsVideoRecorded(true);};var handleClose=function handleClose(){setOpen(false);};var handleSave=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(files){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setCv(files[0]);setOpen(false);case 2:case\"end\":return _context.stop();}}},_callee);}));return function handleSave(_x){return _ref2.apply(this,arguments);};}();var handleOpen=function handleOpen(){setOpen(true);};var postuler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var fd,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fd=new FormData();fd.append('fname','cv.name');fd.append('video',videoBinary);fd.append('data',cv);fd.append('offer',id);_context2.next=7;return axios.post(\"http://localhost:3003/application/\".concat(user._id),fd,{headers:{'Content-Type':'multipart'}});case 7:res=_context2.sent;navigate('/app/Job-offer',{replace:true});case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function postuler(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"form\",Object.assign({autoComplete:\"off\",noValidate:true,className:clsx(classes.root,className)},rest),/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,{subheader:\"Some  information \",title:\"Candidature Profile \"}),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Grid,{container:true,spacing:3},/*#__PURE__*/React.createElement(Grid,{item:true,md:6,xs:12},/*#__PURE__*/React.createElement(Typography,{fullWidth:true,helperText:\"Please specify the first name\",label:\"name\",name:\"name\",variant:\"outlined\"},\" \",/*#__PURE__*/React.createElement(\"h3\",null,\"Name:\"),user.name)),/*#__PURE__*/React.createElement(Grid,{item:true,md:6,xs:12},/*#__PURE__*/React.createElement(Typography,{fullWidth:true,label:\"Last name\",name:\"lastName\",value:user.lastName,variant:\"outlined\"},\" \",/*#__PURE__*/React.createElement(\"h3\",null,\"Last Name:\"),user.lastName)),/*#__PURE__*/React.createElement(Grid,{item:true,md:6,xs:12},/*#__PURE__*/React.createElement(Typography,{fullWidth:true,label:\"Email Address\",name:\"email\",value:user.email,variant:\"outlined\"},\" \",/*#__PURE__*/React.createElement(\"h3\",null,\"Email:\"),user.email)))),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(Box,{display:\"flex\",justifyContent:\"flex-end\",p:2},/*#__PURE__*/React.createElement(DropzoneDialog,{open:open,filesLimit:1,onSave:handleSave,showPreviews:true,maxFileSize:5000000,onClose:handleClose}),/*#__PURE__*/React.createElement(IconButton,{onClick:function onClick(){return setVideo(true);}},/*#__PURE__*/React.createElement(CameraRollIcon,null)),/*#__PURE__*/React.createElement(IconButton,{onClick:function onClick(){return setOpen(true);}},/*#__PURE__*/React.createElement(AttachFileIcon,null)),/*#__PURE__*/React.createElement(Button,{color:\"primary\",variant:\"contained\",onClick:postuler},\"Postuler !\"))),cv&&/*#__PURE__*/React.createElement(Typography,null,cv.name),video&&/*#__PURE__*/React.createElement(ReactRecorder,{onRecordingComplete:onRecordingComplete}));};export default ProfileDetails;","map":{"version":3,"sources":["/home/meriam/testwapp/WApplication/Partie Client/src/views/Apply/ApplyView/ApplyDetails.js"],"names":["React","useState","clsx","AttachFileIcon","Box","Button","Card","CardContent","CardHeader","Divider","Grid","Typography","makeStyles","useSelector","DropzoneDialog","IconButton","Link","RouterLink","useParams","useNavigate","axios","CameraRollIcon","ReactRecorder","useStyles","root","ProfileDetails","className","rest","id","classes","user","state","navigate","open","setOpen","video","setVideo","cv","setCv","videoBinary","setVideoBinary","isVideoRecorded","setIsVideoRecorded","isVideoUploaded","setIsVideoUploaded","recording","setRecording","onRecordingComplete","blob","handleClose","handleSave","files","handleOpen","postuler","fd","FormData","append","post","_id","headers","res","replace","name","lastName","email"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport AttachFileIcon from '@material-ui/icons/AttachFile';\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  CardHeader,\n  Divider,\n  Grid,\n  Typography,\n  makeStyles\n} from '@material-ui/core';\nimport  {useSelector} from 'react-redux';\nimport {DropzoneDialog} from 'material-ui-dropzone';\nimport { IconButton } from '@material-ui/core';\nimport { Link as RouterLink,   useParams,useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport CameraRollIcon from '@material-ui/icons/CameraRoll';\n\nimport ReactRecorder from '../../recorder/recordrtc-react/src/RecordPage.react';\n\n\nconst useStyles = makeStyles(() => ({\n  root: {}\n}));\n \nconst ProfileDetails = ({ className, ...rest }) => {\n  const {id}=useParams();\n  const classes = useStyles();\n  const user=useSelector((state =>state.user))\n  const navigate = useNavigate();\n \n const [open, setOpen] = useState(false);\n const [video,setVideo] = useState(false);\n const [cv,setCv]=useState();\n const [videoBinary, setVideoBinary] = useState();\n const [isVideoRecorded, setIsVideoRecorded] = useState(false);\n const [isVideoUploaded, setIsVideoUploaded] = useState(false);\n const [recording, setRecording] = useState(false);\n \n const onRecordingComplete = (blob) => {\n     setVideoBinary(blob)\n     setIsVideoRecorded(true)\n }\n \n    const handleClose = () => {\n        setOpen(false)\n    }\n    const handleSave = async (files) => {\n        setCv(files[0]);\n        setOpen(false)\n        }\n \n \n    const handleOpen = () => {\n        setOpen(true)\n    }\n    const postuler= async()=>{\n      let fd = new FormData();\n      fd.append('fname', 'cv.name');\n      fd.append('video', videoBinary);\n      fd.append('data', cv);\n      fd.append('offer', id);\n       const res = await axios.post(`http://localhost:3003/application/${user._id}`,fd, {\n        headers: {\n          'Content-Type': 'multipart'}});\n\nnavigate('/app/Job-offer', { replace: true })\n    }\n \n \n \n \n  return (\n    <form\n      autoComplete=\"off\"\n      noValidate\n      className={clsx(classes.root, className)}\n      {...rest}\n    >\n      <Card>\n        <CardHeader\n          subheader=\"Some  information \"\n          title=\"Candidature Profile \"\n        />\n        <Divider />\n        <CardContent>\n          <Grid\n            container\n            spacing={3}\n          >\n            <Grid\n              item\n              md={6}\n              xs={12}\n            >\n              <Typography\n                fullWidth\n                helperText=\"Please specify the first name\"\n                label=\"name\"\n                name=\"name\"\n                variant=\"outlined\"\n              > <h3>Name:</h3>\n              {user.name}</Typography>\n            </Grid>\n            <Grid\n              item\n              md={6}\n              xs={12}\n            >\n              <Typography\n                fullWidth\n                label=\"Last name\"\n                name=\"lastName\"\n                value={user.lastName}\n                variant=\"outlined\"\n              > <h3>Last Name:</h3>\n              {user.lastName}\n              </Typography>\n            </Grid>\n            <Grid\n              item\n              md={6}\n              xs={12}\n            >\n              <Typography\n                fullWidth\n                label=\"Email Address\"\n                name=\"email\"\n                value={user.email}\n                variant=\"outlined\"\n                > <h3>Email:</h3>\n              {user.email}\n              </Typography>  \n            </Grid>\n          </Grid>\n        </CardContent>\n        <Divider />\n \n \n \n        <Box\n          display=\"flex\"\n          justifyContent=\"flex-end\"\n          p={2}\n        >\n          <DropzoneDialog\n                open={open}\n                filesLimit={1}\n                onSave={handleSave}\n                showPreviews={true}\n                maxFileSize={5000000}\n                onClose={handleClose}\n            />\n            <IconButton onClick={()=>setVideo(true)}>\n              <CameraRollIcon/>\n            </IconButton>\n            <IconButton onClick={()=>setOpen(true)}>\n          <AttachFileIcon/>\n       </IconButton>\n          <Button\n            color=\"primary\"\n            variant=\"contained\"\n            onClick={postuler}\n          >\n            Postuler !\n          </Button>\n \n        </Box>\n      </Card>\n      {cv &&\n          <Typography >\n              {cv.name}\n \n          </Typography>}\n          {\n            video && <ReactRecorder onRecordingComplete={onRecordingComplete}/>\n          }\n    </form>\n  );\n};\n \nProfileDetails.propTypes = {\n  className: PropTypes.string\n};\n \nexport default ProfileDetails;\n "]},"metadata":{},"sourceType":"module"}